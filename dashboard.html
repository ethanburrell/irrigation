<!DOCTYPE html>
<html>
<title>Dashboard</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
html,body,h1,h2,h3,h4,h5 {font-family: "Raleway", sans-serif}
</style>
<body class="">
<div class="w3-container w3-twothird w3-light-grey">
  <div id="map-canvas" style="width:100%; height:100vh; margin:0; padding:0;"></div>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyClbcHmMjjh-Tr9hj7BlvR0AG50DvXo-18&v=3.exp&sensor=false&libraries=drawing"></script>
</div>


<div class="w3-container w3-third">
  <br>
  <table class="w3-table w3-striped w3-bordered">
    <tr>
      <th> <h6> Field Sensor</h6> </th>
      <th> <h6> Battery % </h6></th>
      <th> <h6> View Graph </h6> </th>
    </tr>
  <tr>
    <td> <h4> 1 </h4> </td>
    <td id="bP1"> </td>
    <td> <a href="graph_test.html?datatype=t&fieldsensor=1&duration=w"> Graph </a> </td>
  </tr>
  <tr>
    <td> <h4> 2 </h4> </td>
    <td id="bP2"> </td>
    <td> <a href="graph_test.html?datatype=t&fieldsensor=2&duration=w"> Graph </a> </td>
  </tr>
  <tr>
    <td> <h4> 3 </h4> </td>
    <td id="bP3"> </td>
    <td> <a href="graph_test.html?datatype=t&fieldsensor=3&duration=w"> Graph </a> </td>
  </tr>
  <tr>
    <td> <h4> 4 </h4> </td>
    <td id="bP4"> </td>
    <td> <a href="graph_test.html?datatype=t&fieldsensor=4&duration=w"> Graph </a> </td>
  </tr>
  <tr>
    <td> <h4> 5 </h4> </td>
    <td id="bP5"> </td>
    <td> <a href="graph_test.html?datatype=t&fieldsensor=5&duration=w"> Graph </a> </td>
  </tr>
  </table>
</div>

<script>
function createBatteryPercentage(row, percent) {
  var b = document.getElementById(row)
  b.innerText = percent;
  if (percent > 50) {
    b.style = "color: green"
  } else if (percent > 30) {
    b.style = "color: yellow"
  } else if (percent <= 30) {
    b.style = "color: red"
  }
}

$.ajax({
  //https://data-farm-armadillodude.c9users.io/notes?key=102798&datatype=t&fieldsensor=1&duration=d
    url: "https://data-farm-armadillodude.c9users.io/battery?key=102798&fieldsensor=1",
    dataType: 'text',
    success: function(data) {
      data = JSON.parse(data);
      createBatteryPercentage("bP1", data["x"])
    }
  });

  $.ajax({
    //https://data-farm-armadillodude.c9users.io/notes?key=102798&datatype=t&fieldsensor=1&duration=d
      url: "https://data-farm-armadillodude.c9users.io/battery?key=102798&fieldsensor=2",
      dataType: 'text',
      success: function(data) {
        data = JSON.parse(data);
        createBatteryPercentage("bP2", data["x"])
      }
    });

    $.ajax({
      //https://data-farm-armadillodude.c9users.io/notes?key=102798&datatype=t&fieldsensor=1&duration=d
        url: "https://data-farm-armadillodude.c9users.io/battery?key=102798&fieldsensor=3",
        dataType: 'text',
        success: function(data) {
          data = JSON.parse(data);
          createBatteryPercentage("bP3", data["x"])
        }
      });

      $.ajax({
        //https://data-farm-armadillodude.c9users.io/notes?key=102798&datatype=t&fieldsensor=1&duration=d
          url: "https://data-farm-armadillodude.c9users.io/battery?key=102798&fieldsensor=4",
          dataType: 'text',
          success: function(data) {
            data = JSON.parse(data);
            createBatteryPercentage("bP4", data["x"])
          }
        });

        $.ajax({
          //https://data-farm-armadillodude.c9users.io/notes?key=102798&datatype=t&fieldsensor=1&duration=d
            url: "https://data-farm-armadillodude.c9users.io/battery?key=102798&fieldsensor=5",
            dataType: 'text',
            success: function(data) {
              data = JSON.parse(data);
              createBatteryPercentage("bP5", data["x"])
            }
          });



</script>

<script>
      var map = new google.maps.Map(document.getElementById('map-canvas'), {
        zoom: 19,
        center: new google.maps.LatLng(38.710151, -122.961827),
        mapTypeId: 'satellite'
      });

      // Define the LatLng coordinates for the polygon's path.
      var m1 ={lat:38.71148017075376, lng:-122.96172702673255};
      var m2 ={lat:38.711641327060725, lng:-122.96179944637595};
      var m3 ={lat:38.71120180900418, lng:-122.96140516165076};
      var m4 ={lat:38.70849034142974, lng:-122.96003589394866};
      var m5 ={lat:38.71100501286729, lng:-122.9626427980636};


      // Construct the polygon.
      var marker1 = new google.maps.Marker({
        position: m1,
        map: map,
        label: "1"
      });
      var marker2 = new google.maps.Marker({
        position: m2,
        map: map,
        label: "2"
      });
      var marker3 = new google.maps.Marker({
        position: m3,
        map: map,
        label: "3"
      });
      var marker4 = new google.maps.Marker({
        position: m4,
        map: map,
        label: "4"
      });
      var marker5 = new google.maps.Marker({
        position: m5,
        map: map,
        label: "5"
      });

      //marker1.setMap(map);

  </script>

</body>
</html>
