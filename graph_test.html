<html>
<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

</head>
<body>
<script src="https://rawgit.com/moment/moment/2.2.1/min/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.js"> </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"> </script>

<canvas id="chartjs-0" class="chartjs" width="1268" height="634" style="display: block; height: 317px; width: 634px;"></canvas>

<script>

function returnDateTimeArray(str) {
  var date_str = str.split(" ")[0];
  var time_str = str.split(" ")[1];
  var date_arr = date_str.split("-");
  var time_arr = time_str.split(":");
  console.log(date_arr);
  return [date_arr[2], date_arr[0], date_arr[1], time_arr[0], time_arr[1], time_arr[2]]
}

$(document).ready(function(){
  /*
  $.ajax({
             type: "GET", //rest Type
             dataType: 'json', //mispelled
             url: "https://data-farm-armadillodude.c9users.io/notes?key=102798&datatype=t",
             contentType: "application/json; charset=utf-8",
             success: function (msg) {
                 console.log(msg);
             }
  });*/

    $.ajax({
        url: "https://data-farm-armadillodude.c9users.io/notes?key=102798&datatype=t",
        dataType: 'json',
        success: function(data) {
            // Rates are in `json.rates`
            // Base currency (USD) is `json.base`
            // UNIX Timestamp when rates were collected is in `json.timestamp`
            console.log("asf");
            console.log(data);
            var sample = '[{ "x": "31-07-2018 11:25:23", "y":"68.54"} ,{ "x": "31-07-2018 11:25:16", "y":"68.52"} ,{ "x": "31-07-2018 11:25:10", "y":"68.5"} ,{ "x": "31-07-2018 11:25:03", "y":"68.48"} ,{ "x": "31-07-2018 11:24:57", "y":"68.46"} ,{ "x": "31-07-2018 11:24:50", "y":"68.44"} ,{ "x": "31-07-2018 11:24:44", "y":"68.4"} ,{ "x": "31-07-2018 11:24:37", "y":"68.39"} ,{ "x": "31-07-2018 11:24:31", "y":"68.37"} ,{ "x": "31-07-2018 11:24:24", "y":"68.33"} ]' //,{ "time": "31-07-2018 11:25:10", "t":"68.5"} ,{ "time": "31-07-2018 11:25:03", "t":"68.48"} ,{ "time": "31-07-2018 11:24:57", "t":"68.46"} ,{ "time": "31-07-2018 11:24:50", "t":"68.44"} ,{ "time": "31-07-2018 11:24:44", "t":"68.4"} ,{ "time": "31-07-2018 11:24:37", "t":"68.39"} ,{ "time": "31-07-2018 11:24:31", "t":"68.37"} ,{ "time": "31-07-2018 11:24:24", "t":"68.33"} ]'
            sample = JSON.parse(data);
            var time_arr = [];
            var data_arr = [];
            for (i in sample) {
              //console.log(sample[i]["x"])
              var date_arr = returnDateTimeArray(sample[i]["x"])
              time_arr.push(new Date(date_arr[0], date_arr[1], date_arr[2], date_arr[3], date_arr[4], date_arr[5]));
              data_arr.push(sample[i]["y"]);
              //console.log(new Date(sample[i]["x"]))
              //sample[i]["x"] = moment(sample[i]["x"], "DD-MM-YYYY HH:MM:SS");
            }
            console.log(time_arr);

            var data = {
                // Labels should be Date objects
                labels: time_arr,
                datasets: [{
                    fill: false,
                    //label: 'Page Views',
                    data: data_arr,
                    borderColor: '#fe8b36',
                    backgroundColor: '#fe8b36',
                    lineTension: 0,
                }]
            }


            var ctx = document.getElementById("chartjs-0").getContext('2d');

            var chart = new Chart(ctx, {
                type: 'line',
                data: data,
                options: {
                    scales: {
                        xAxes: [{
                            type: 'time',
                            unit: 'minute'
                        }]
                    }
                }
            });
        }
    });

});

</script>
</body>
</html>
